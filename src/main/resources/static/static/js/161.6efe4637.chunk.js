(self.webpackChunkchat_app_front=self.webpackChunkchat_app_front||[]).push([[161],{591:function(e,s,t){"use strict";t.d(s,{I:function(){return i},b:function(){return c}});var r,a=t(8520),n=t.n(a),c=function(){r=n()("http://localhost:8081",{query:{username:localStorage.getItem("username")}})},i=function(){return null===r&&(r=n()("http://localhost:8081",{query:{username:localStorage.getItem("username")}})),r}},3849:function(e,s,t){"use strict";t.d(s,{A:function(){return r}});var r=function(e,s){var t=new Map;return e.forEach((function(e){t.set(e,[]),s.forEach((function(s){e.username!==s.fromUser&&e.username!==s.toUser||t.get(e).push(s)}))})),t}},2721:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return p}});var r=t(2310),a=t(2870),n=t(2398),c=t(4336),i=t(3849),u=t(3433);var l=t.p+"static/media/Menu Icon.47342042a908cab77242a9dbcb58a0ef.svg";var o=t.p+"static/media/Search.d2bbcfc4d7a36db54a9f57ddf1f1d7cd.svg",f=t(2388),m=function(e){var s=(0,a.s0)(),t=(0,a.UO)().chatId,m=(0,c.TL)(),d=(0,r.useState)([]),g=(0,n.Z)(d,2),h=g[0],v=g[1],p=(0,r.useState)([]),x=(0,n.Z)(p,2),b=x[0],j=x[1],N=(0,r.useState)(""),w=(0,n.Z)(N,2),S=w[0],y=w[1],L=(0,r.useState)(0),I=(0,n.Z)(L,2),E=I[0],M=I[1],k=[];(0,r.useEffect)((function(){m((0,u.Nv)()),m((0,u.pv)())}),[]);var C=(0,c.CG)((function(e){return{friendsList:e.message.friendsList,messagesList:e.message.messagesList,groupList:e.message.groupList,groupMessageList:e.message.groupMessageList}}),c.ir),T=C.friendsList,F=C.messagesList,U=C.groupList,A=C.groupMessageList;(0,r.useEffect)((function(){var e=(0,i.A)(T,F);U.forEach((function(e){console.log(e.groupAvatar),k.push({username:e.groupName,avatar:e.groupAvatar,chatId:e.groupId,type:"group"})})),e.forEach((function(e,s){var t,r,a=e.filter((function(e){if(e.fromUser===s.username)return!0}));k.push({username:s.username,avatar:s.avatar,type:"single",newMessageNumber:(null===a||void 0===a?void 0:a.length)||"",newMessageTip:(null===(t=a[length-1])||void 0===t?void 0:t.content)||"",newMessageTime:(null===(r=a[length-1])||void 0===r?void 0:r.sendTime)||""}),v(k),j(k)}))}),[T,F,U,A]);var O=(0,r.useCallback)((function(e,t){M(t),console.log(t),"single"===e.type?s("/chat/single/"+e.username):s("/chat/group/"+e.chatId),localStorage.setItem("currentIndex",JSON.stringify(t))}),[t]);(0,r.useEffect)((function(){var e=localStorage.getItem("currentIndex");M(+e)}));(0,r.useEffect)((function(){var e=[];h.forEach((function(s){s.username.includes(S)&&e.push(s)})),j(e)}),[S]);var Z=function(){var e;return function(s){e&&clearTimeout(e),e=setTimeout((function(){y(s)}),1e3)}}(),_=(0,r.useCallback)((function(e){Z(e.target.value)}),[]);return(0,f.jsxs)("div",{className:"flex flex-col w-[22.75rem] h-full  bg-white",children:[(0,f.jsxs)("div",{className:"relative flex justify-between items-center h-[3.5rem] px-4 ",children:[(0,f.jsx)("img",{className:"cursor-pointer",src:l}),(0,f.jsx)("img",{className:"cursor-pointer absolute top-[1rem] left-[5.5rem]",src:o}),(0,f.jsx)("input",{className:"w-[17.25rem] h-[2.5rem] pl-[3.5rem] rounded-[1.375rem] bg-[#F5F5F5]",type:"text",placeholder:"Search",onChange:_})]}),(0,f.jsx)("div",{className:"overflow-auto",children:b.map((function(e,s){return(0,f.jsxs)("div",{className:"flex h-[4.5rem] items-center px-4 py-3 cursor-pointer ".concat(E===s?"bg-[#F5F5F5]":""),onClick:function(){return O(e,s)},children:[(0,f.jsx)("div",{className:"w-[3rem] h-[3rem] mr-[0.625rem]",children:(0,f.jsx)("img",{className:"w-full h-full rounded-full",src:e.avatar})}),(0,f.jsx)("div",{className:"flex flex-col flex-1 ",children:(0,f.jsx)("div",{className:"flex justify-between flex-1",children:(0,f.jsx)("div",{children:e.username})})})]},s)}))})]})},d=(0,r.memo)(m);var g=t.p+"static/media/bg print.ea5d3a3be30e7f0ffc8d9b9db3cba083.svg",h=t(591),v=function(e){var s=(0,c.TL)(),t=(0,a.UO)();return(0,r.useEffect)((function(){(0,h.b)();var e=(0,h.I)();e&&e.on("receiveSingleMessageEvent",(function(e){s((0,u.Hz)(e))}))}),[]),(0,f.jsx)("div",{className:"h-screen flex justify-center items-center bg-slate-400 ",children:(0,f.jsxs)("div",{className:"relative w-[80rem] h-[45rem] ",children:[(0,f.jsx)("img",{className:"absolute w-full h-full bg-gray-700  ",src:g}),(0,f.jsxs)("div",{className:"absolute  flex  w-full h-full",children:[(0,f.jsx)(d,{}),(0,f.jsx)("div",{className:" flex-1 flex justify-center items-center text-white ".concat("{}"===JSON.stringify(t)?"":"hidden"),children:"Select a chat to start messaging"}),(0,f.jsx)(r.Suspense,{fallback:"",children:(0,f.jsx)(a.j3,{})})]})]})})},p=(0,r.memo)(v)},4816:function(){}}]);
//# sourceMappingURL=161.6efe4637.chunk.js.map